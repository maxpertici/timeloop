# Internationalisation (i18n)

## Vue d'ensemble

Cette application utilise **i18next** et **react-i18next** pour gérer les traductions multilingues.

## Langues supportées

- **Anglais (en)** - Langue par défaut
- **Français (fr)**

## Détection automatique de la langue

L'application détecte automatiquement la langue du système au démarrage :

1. Elle récupère la langue du navigateur/système via `navigator.language`
2. Si la langue est supportée, elle l'utilise
3. Sinon, elle utilise l'anglais par défaut

Voir le fichier `src/i18n/index.ts` pour la logique de détection.

## Structure des fichiers

```
src/
├── i18n/
│   ├── index.ts              # Configuration i18next
│   └── locales/
│       ├── en.json            # Traductions anglaises
│       └── fr.json            # Traductions françaises
```

## Utilisation dans les composants

### Import du hook

```typescript
import { useTranslation } from 'react-i18next';
```

### Utilisation basique

```typescript
function MyComponent() {
  const { t } = useTranslation();
  
  return <h1>{t('nav.track')}</h1>;
}
```

### Avec interpolation

```typescript
// Dans le fichier de traduction:
// "welcome": "Welcome, {{name}}!"

const name = "John";
<p>{t('welcome', { name })}</p>
// Affiche: "Welcome, John!"
```

### Avec pluralisation

```typescript
const count = 5;
<p>{t('entries.confirmDeleteMessage', { 
  count: count,
  entriesWord: count > 1 ? t('entries.entries') : t('entries.entry')
})}</p>
```

## Ajouter une nouvelle langue

1. Créez un nouveau fichier JSON dans `src/i18n/locales/` (ex: `de.json` pour l'allemand)
2. Copiez la structure de `en.json` et traduisez les valeurs
3. Importez le fichier dans `src/i18n/index.ts`:

```typescript
import de from './locales/de.json';
```

4. Ajoutez-le aux ressources:

```typescript
i18n.use(initReactI18next).init({
  resources: {
    en: { translation: en },
    fr: { translation: fr },
    de: { translation: de },  // Nouvelle langue
  },
  // ...
});
```

5. Ajoutez le code de langue dans `supportedLanguages`:

```typescript
const supportedLanguages = ['en', 'fr', 'de'];
```

## Ajouter de nouvelles clés de traduction

1. Ajoutez la clé dans tous les fichiers de traduction (`en.json` et `fr.json`)
2. Utilisez la clé dans votre composant avec `t('namespace.key')`

Exemple:

```json
// en.json
{
  "settings": {
    "title": "Settings",
    "theme": "Theme"
  }
}

// fr.json
{
  "settings": {
    "title": "Paramètres",
    "theme": "Thème"
  }
}
```

```typescript
// Dans le composant
<h1>{t('settings.title')}</h1>
<label>{t('settings.theme')}</label>
```

## Organisation des traductions

Les traductions sont organisées par espace de noms (namespace) correspondant aux différentes vues/sections de l'application :

- `nav.*` - Navigation principale
- `track.*` - Vue Track
- `count.*` - Vue Count
- `entries.*` - Vue Entries
- `categories.*` - Vue Categories
- `entryModal.*` - Modal d'entrée
- `common.*` - Éléments communs (unités, etc.)

## Changer la langue manuellement (optionnel)

Si vous souhaitez ajouter un sélecteur de langue:

```typescript
import { useTranslation } from 'react-i18next';

function LanguageSelector() {
  const { i18n } = useTranslation();
  
  return (
    <select value={i18n.language} onChange={(e) => i18n.changeLanguage(e.target.value)}>
      <option value="en">English</option>
      <option value="fr">Français</option>
    </select>
  );
}
```

## Dépendances

- `i18next` - Framework d'internationalisation
- `react-i18next` - Bindings React pour i18next

## Ressources

- [Documentation i18next](https://www.i18next.com/)
- [Documentation react-i18next](https://react.i18next.com/)
